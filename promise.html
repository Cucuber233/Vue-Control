<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Promise</title>
</head>
<body>
    <script>
        // //resolve, reject, all, ract
        // //resolve = then, reject = catch
        // let promise = new Promise((resolve, reject) =>{
        //    resolve(233)
        // })

        // promise.then(response =>{
        //    console.log('成功')
        //    console.log(response)
        // }).catch(erroe =>{
        //    console.log('失败')
        // })

        //链式
        function promise1(Status){
          return new Promise((resolve, reject) => {
            if(Status){
                console.log('第一个promise')
               resolve('yi')    //可以应用于axios
            }else{
                console.log('第1个promise')
               reject('1')
            }
            })
        }
        function promise2(Status){
          return new Promise((resolve, reject) => {
            if(Status){
                console.log('第二个promise')
               resolve('er')
            }else{
                console.log('第2个promise')
               reject('2')
            }
            })
        }
        function promise4(Status){
          return new Promise((resolve, reject) => {
            if(Status){
                console.log('第四个prsiomise')
               resolve('si')
            }else{
                console.log('第4个promise')
               reject('4')
            }
            })
        }

        //链式
        promise1(true).then(response =>{ //第一个
            console.log(response)
            return promise2(true)
        }).then(response =>{             //第二个
            console.log(response)
            return promise4(true)
        }).then(response =>{
            console.log(response)
        }).catch(error=>{
            console.log(error)
        })

        // //all方法，数组内有promise必须全部成功（全部反回response），才会执行then回调，只要有一个是返回（reject）就不会成功，才会执行catch
        // Promise.all( [promise1(true), promise2(true), promise4(true)] ).then(response =>{
        //     console.log('全部成功')
        // }).catch(error =>{
        //     console,log(e'部分失败')
        // })
        
        //racte方法，当在执行的时候，遇到的返回结果是resolve(成功),一直执行链式
        //只要有一个是返回resolve，就会代表成功，就会回调then，但是，如果第一个返回的是reject，那么就执行catch
        // Promise.race( [promise1(true), promise2(true), promise4(true)] ).then(response =>{
        //     console.log('全部成功')
        // }).catch(error =>{
        //     console,log('部分失败')
        // })

    </script>
</body>
</html>